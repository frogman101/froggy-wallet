<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSV Wallet</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-5">

    <div class="max-w-lg mx-auto bg-white p-6 rounded-lg shadow-md">
        <h2 class="text-2xl font-bold text-center">Bitcoin SV Wallet</h2>

        <button id="generate-wallet" class="mt-4 bg-blue-500 text-white px-4 py-2 rounded w-full">Generate Wallet</button>
        <button id="generate-address" class="mt-4 bg-green-500 text-white px-4 py-2 rounded w-full hidden">Generate New Address</button>

        <h3 class="mt-6 text-xl">Your Addresses</h3>
        <ul id="address-list" class="mt-2"></ul>
    </div>

    <script>
        document.getElementById("generate-wallet").addEventListener("click", async () => {
            const response = await fetch("/generate-wallet", { 
                method: "POST", 
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ userId: "default-user" }) 
            });
            const data = await response.json();
            alert(`Wallet Created! Seed Phrase: ${data.mnemonic}`);
            document.getElementById("generate-address").classList.remove("hidden");
        });

        document.getElementById("generate-address").addEventListener("click", async () => {
            const response = await fetch("/generate-new-address", { 
                method: "POST", 
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ userId: "default-user" }) 
            });
            const data = await response.json();
            document.getElementById("address-list").innerHTML += `<li>${data.newAddress}</li>`;
        });
    <h3 class="mt-6 text-xl">Your BSV Address</h3>
<p id="wallet-address" class="font-mono p-2 bg-gray-200 rounded"></p>
<button onclick="copyAddress()" class="mt-2 bg-blue-500 text-white px-4 py-2 rounded">Copy Address</button>
<p id="wallet-address"><%= addresses[0] %></p>

<script>
    function copyAddress() {
        const address = document.getElementById("wallet-address").innerText;
        navigator.clipboard.writeText(address);
        alert("Address copied: " + address);
    }<button id="view-private-key" class="mt-4 bg-red-500 text-white px-4 py-2 rounded">View Private Key</button>
<p id="private-key" class="font-mono p-2 bg-gray-200 rounded hidden"></p>

<script>
    document.getElementById("view-private-key").addEventListener("click", async () => {
        const response = await fetch("/view-private-key", { 
            method: "POST", 
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ userId: "default-user" }) 
        });
        const data = await response.json();
        document.getElementById("private-key").innerText = data.privateKey;
        document.getElementById("private-key").classList.remove("hidden");
    });
<h3 class="mt-6 text-xl">Send BSV</h3>
<input id="recipient" type="text" placeholder="Recipient Address" class="p-2 border rounded w-full mt-2">
<input id="amount" type="number" placeholder="Amount in BSV" class="p-2 border rounded w-full mt-2">
<button id="send-bsv" class="mt-4 bg-green-500 text-white px-4 py-2 rounded w-full">Send</button>

<script>
    document.getElementById("send-bsv").addEventListener("click", async () => {
        const recipientAddress = document.getElementById("recipient").value;
        const amount = document.getElementById("amount").value;

        if (!recipientAddress || !amount) {
            alert("Please enter a valid address and amount.");
            return;
        }

        const response = await fetch("/send-bsv", { 
            method: "POST", 
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ userId: "default-user", recipientAddress, amount }) 
        });
        const data = await response.json();

        if (data.success) {
            alert("Transaction Sent! TXID: " + data.txid);
        } else {
            alert("Error: " + data.error);
        }
    });
</script>


</body>
</html>
